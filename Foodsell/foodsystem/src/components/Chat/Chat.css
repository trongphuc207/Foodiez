/* Chat UI theme */
:root {
  --chat-border: #e7ebf0;
  --chat-bg: #ffffff;
  --chat-sidebar-bg: #f7f9fc;
  --chat-accent: #4966ff;
  --chat-accent-2: #7b9bff;
  --chat-muted: #6b7280;
  --chat-strong: #111827;
  --chat-bubble-me: #eaf0ff;
  --chat-bubble-other: #ffffff;
  --chat-success: #10b981;
  --chat-danger: #ef4444;
}

.chat-layout {
  display: flex;
  height: 78vh;
  border: 1px solid var(--chat-border);
  border-radius: 14px;
  overflow: hidden;
  background: var(--chat-bg);
  box-shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.chat-sidebar {  
  width: 320px;
  max-width: 36%;
  background: var(--chat-sidebar-bg);
  border-right: 1px solid var(--chat-border);
  display:flex; flex-direction:column;
}
.chat-sidebar-header{padding:14px 16px 10px;font-weight:700;color:var(--chat-strong);border-bottom:1px solid var(--chat-border);display:flex;align-items:center;gap:10px}
.chat-sidebar-header .dot{width:8px;height:8px;border-radius:50%;background:#111}
.chat-search { display:flex; gap:8px; padding: 10px 12px; border-bottom: 1px solid var(--chat-border); }
.chat-search input{flex:1; padding:10px 14px; border:1px solid var(--chat-border); border-radius:999px; background:#fff; outline:none}
.chat-search input:focus{ border-color: var(--chat-accent); }
.chat-search button{padding:10px 14px; border:1px solid var(--chat-accent); background:var(--chat-accent); color:#fff; border-radius:999px; cursor:pointer; font-weight:600}
.chat-conv-list{overflow-y:auto; padding: 10px;}
.chat-conv-item { padding: 10px 12px; cursor: pointer; border-radius: 12px; transition: background .15s ease, transform .05s ease; border:1px solid transparent; display:flex; align-items:center; gap:12px; }
.chat-conv-item .avatar {width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#eef2ff;color:#3b57ff;font-weight:700;border:1px solid #e5e7eb}
.chat-conv-item .meta{flex:1;min-width:0}
.chat-conv-item .title{font-weight:600;color:#111827;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-conv-item .sub{font-size:12px;color:var(--chat-muted);display:flex;align-items:center;gap:8px}
.chat-conv-item .tag{font-size:11px;padding:2px 6px;border-radius:999px;border:1px solid #e5e7eb;background:#fff;color:#374151}
.chat-conv-item .tag.success{border-color:#c8f1e7;background:#ecfdf5;color:#047857}
.chat-conv-item .tag.danger{border-color:#fecaca;background:#fef2f2;color:#b91c1c}
.chat-conv-item.active, .chat-conv-item:hover { background: #eef3ff; border-color:#dbe6ff }
.chat-conv-item:active{ transform:scale(0.995) }

.chat-window { flex: 1; display:flex; flex-direction:column; }
.chat-header{display:flex; align-items:center; justify-content:space-between; padding:14px 18px; border-bottom:1px solid var(--chat-border); background: linear-gradient(90deg, rgba(73,102,255,0.08), rgba(73,102,255,0.02));}
.chat-header .title{font-weight:700;color:#0f172a}
.chat-header .right a{color:var(--chat-accent); font-size:13px; cursor:pointer; padding:6px 10px; border-radius:999px; border:1px solid #dbe6ff; background:#f5f8ff; text-decoration:none}

.chat-messages { flex: 1; padding: 18px; overflow-y: auto; background:#f7fafc; }
.chat-messages::-webkit-scrollbar{height:10px;width:10px}
.chat-messages::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:999px}
.chat-messages::-webkit-scrollbar-track{background:transparent}
.chat-empty{flex:1;display:flex;align-items:center;justify-content:center;color:var(--chat-muted)}
.chat-empty .welcome{display:flex;flex-direction:column;align-items:center;gap:8px}
.chat-empty .welcome .icon{width:66px;height:66px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#eef2ff;color:#3b57ff;font-size:28px;border:1px solid #e5e7eb}
.chat-empty .welcome .headline{font-weight:700;color:#111827}
.chat-empty .welcome .sub{font-size:13px;color:#6b7280}
.date-sep{display:flex;align-items:center;gap:12px;margin:14px 0;color:#6b7280;font-size:12px}
.date-sep:before,.date-sep:after{content:"";flex:1;height:1px;background:#e5e7eb}
.chat-message { position:relative; margin: 8px 0; max-width: 72%; padding: 10px 12px; border-radius: 14px; line-height:1.4; white-space:pre-wrap; box-shadow:0 1px 0 rgba(0,0,0,0.03)}
.chat-message.mine { background: var(--chat-bubble-me); margin-left:auto; border:1px solid #d7e2ff; }
.chat-message.other { background: var(--chat-bubble-other); border:1px solid #eef1f4; }
.chat-message.mine:after{content:""; position:absolute; right:-6px; bottom:8px; width:10px; height:10px; background:var(--chat-bubble-me); border-right:1px solid #d7e2ff; border-bottom:1px solid #d7e2ff; transform:rotate(45deg)}
.chat-message.other:after{content:""; position:absolute; left:-6px; bottom:8px; width:10px; height:10px; background:var(--chat-bubble-other); border-left:1px solid #eef1f4; border-bottom:1px solid #eef1f4; transform:rotate(45deg)}
.chat-message.has-image { background: transparent; border:none; box-shadow:none; padding: 4px; max-width: 64%; display:flex; flex-direction: column; gap:6px; }
.chat-message.has-image:after{ display:none }
.chat-message.has-image .image-card{ display:block; background:#fff; border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,.06) }
.chat-message.mine.has-image .image-card{ border-color:#d7e2ff; }
.chat-message.mine.has-image{ align-items: flex-end; }
.chat-message.other.has-image{ align-items: flex-start; }
.chat-message.has-image .image-card .chat-tools{ padding: 6px 8px; display:flex; justify-content: space-between; }
.chat-message.has-image .image-caption{ padding:6px 8px; font-size:14px; color:#374151; max-width: 320px; }
.chat-tools { display:flex; justify-content:space-between; align-items:center; margin-top:6px; }
.chat-tools .time{font-size:11px;color:var(--chat-muted)}
.report-link { color:var(--chat-muted); cursor:pointer; font-size:12px; }

/* Images in messages */
.chat-message .chat-image{max-width:320px; max-height:360px; width:auto; height:auto; display:block; object-fit:cover; cursor:pointer; transition:transform 0.2s, box-shadow 0.2s}
.chat-message.mine .chat-image{border:1px solid #d7e2ff}
.chat-message.other .chat-image{border:1px solid #eef1f4}
.chat-message .chat-image:hover{transform:scale(1.02); box-shadow:0 4px 12px rgba(0,0,0,.15)}

.chat-input { display:flex; gap:10px; padding: 12px; border-top: 1px solid var(--chat-border); background:#fff; }
.chat-input textarea{ flex:1; padding: 12px 14px; border:1px solid var(--chat-border); border-radius: 999px; resize:none; max-height:140px; outline:none }
.chat-input textarea:focus{ border-color: var(--chat-accent) }
.chat-input button{ padding: 10px 16px; border:none; background:linear-gradient(135deg,var(--chat-accent),var(--chat-accent-2)); color:white; border-radius:999px; cursor:pointer; font-weight:700 }
.chat-input button:disabled{ background:#c7dafc; cursor:not-allowed }

/* Make the first button in input bar a round icon button (camera) without editing JSX */
.chat-input button:first-child{
  width:40px; height:40px; padding:0; border-radius:50%;
  background:#eef2ff; border:1px solid #dbe6ff; color:transparent; overflow:hidden;
  position:relative; box-shadow:0 1px 0 rgba(0,0,0,0.03);
}
.chat-input button:first-child::before{
  content:""; position:absolute; inset:0; margin:auto; width:22px; height:22px;
  background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%234966ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>') center/contain no-repeat;
  opacity:.9;
}
.chat-input button:first-child:hover{background:#e6ecff}
.chat-input button:first-child:active{transform:scale(0.98)}

/* Mobile */
@media (max-width: 900px){ .chat-sidebar{ width: 38%; } }
@media (max-width: 700px){ .chat-sidebar{ display:none; } }